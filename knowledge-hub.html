<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legal Knowledge Hub - JusticeSetu</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        /* CSS Variables for consistent theming */
        :root {
            --navy-blue: #1a237e;
            --navy-blue-light: #283593;
            --gold: #ffb300;
            --gold-light: #ffca28;
            --white: #ffffff;
            --light-gray: #f5f5f5;
            --medium-gray: #e0e0e0;
            --dark-gray: #424242;
            --error: #d32f2f;
            --success: #388e3c;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --border-radius: 8px;
        }

        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-gray);
            color: var(--dark-gray);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            border: none;
            font-size: 0.95rem;
        }

        .btn-primary {
            background-color: var(--gold);
            color: var(--navy-blue);
        }

        .btn-primary:hover {
            background-color: var(--gold-light);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: var(--navy-blue);
            color: var(--white);
        }

        .btn-secondary:hover {
            background-color: var(--navy-blue-light);
            transform: translateY(-2px);
        }

        .btn-outline {
            border: 2px solid var(--navy-blue);
            color: var(--navy-blue);
            background-color: transparent;
        }

        .btn-outline:hover {
            background-color: var(--navy-blue);
            color: var(--white);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.85rem;
        }

        .card {
            background-color: var(--white);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-title {
            font-size: 1.2rem;
            color: var(--navy-blue);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .card-title i {
            margin-right: 10px;
            color: var(--gold);
        }

        /* Header Styles */
        header {
            background-color: var(--white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--navy-blue);
        }

        .logo i {
            margin-right: 10px;
            color: var(--gold);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--navy-blue);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .user-name {
            font-weight: 500;
        }

        .logout-btn {
            background: none;
            border: none;
            color: var(--navy-blue);
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .logout-btn:hover {
            color: var(--gold);
        }

        /* Dashboard Layout */
        .dashboard {
            display: flex;
            flex: 1;
        }

        .sidebar {
            width: 250px;
            background-color: var(--navy-blue);
            color: var(--white);
            padding: 20px 0;
            height: calc(100vh - 70px);
            position: sticky;
            top: 70px;
            overflow-y: auto;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-menu li {
            margin-bottom: 5px;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: rgba(255, 255, 255, 0.8);
            transition: all 0.3s;
        }

        .sidebar-menu a:hover, .sidebar-menu a.active {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--white);
            border-left: 4px solid var(--gold);
        }

        .sidebar-menu i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        .main-content {
            flex: 1;
            padding: 30px;
        }

        .welcome-section {
            margin-bottom: 30px;
        }

        .welcome-section h1 {
            color: var(--navy-blue);
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .welcome-section p {
            color: var(--dark-gray);
            max-width: 600px;
        }

        /* Search Section */
        .search-section {
            margin-bottom: 30px;
        }

        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .search-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid var(--medium-gray);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--navy-blue);
        }

        .category-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .category-btn {
            padding: 8px 16px;
            background-color: var(--white);
            border: 1px solid var(--medium-gray);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .category-btn:hover, .category-btn.active {
            background-color: var(--navy-blue);
            color: var(--white);
            border-color: var(--navy-blue);
        }

        /* Knowledge Hub Grid */
        .knowledge-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .article-card {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .article-card .card-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .article-card p {
            margin-bottom: 20px;
            color: var(--dark-gray);
            flex: 1;
        }

        .article-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--dark-gray);
            margin-top: 10px;
        }

        .article-category {
            background-color: rgba(255, 179, 0, 0.1);
            color: var(--navy-blue);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* Article Detail */
        .article-detail {
            display: none;
            background-color: var(--white);
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .article-header {
            margin-bottom: 20px;
            border-bottom: 1px solid var(--medium-gray);
            padding-bottom: 15px;
        }

        .article-header h2 {
            color: var(--navy-blue);
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .article-meta-large {
            display: flex;
            gap: 20px;
            color: var(--dark-gray);
            font-size: 0.9rem;
        }

        .article-content {
            line-height: 1.8;
            margin-bottom: 30px;
        }

        .article-content h3 {
            color: var(--navy-blue);
            margin: 20px 0 10px;
        }

        .article-content p {
            margin-bottom: 15px;
        }

        .article-content ul, .article-content ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            color: var(--navy-blue);
            font-weight: 500;
            margin-bottom: 20px;
            cursor: pointer;
        }

        .back-btn:hover {
            color: var(--gold);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--dark-gray);
        }

        .empty-state i {
            font-size: 3rem;
            color: var(--medium-gray);
            margin-bottom: 15px;
        }

        /* Footer */
        footer {
            background-color: var(--navy-blue);
            color: var(--white);
            padding: 30px 0 20px;
            margin-top: auto;
        }

        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-column h3 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 40px;
            height: 2px;
            background-color: var(--gold);
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 8px;
        }

        .footer-column ul li a {
            color: rgba(255, 255, 255, 0.8);
            transition: color 0.3s;
        }

        .footer-column ul li a:hover {
            color: var(--gold);
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            opacity: 0.7;
            font-size: 0.9rem;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .dashboard {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                position: static;
            }
            
            .sidebar-menu {
                display: flex;
                overflow-x: auto;
            }
            
            .sidebar-menu li {
                flex: 0 0 auto;
                margin-bottom: 0;
            }
            
            .sidebar-menu a {
                padding: 10px 15px;
                white-space: nowrap;
            }
            
            .knowledge-grid {
                grid-template-columns: 1fr;
            }
            
            .search-box {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="index.html" class="logo">
                <i class="fas fa-balance-scale"></i>
                JusticeSetu
            </a>
            
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">U</div>
                <div class="user-name" id="userName">User</div>
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
    </header>

    <!-- Dashboard Layout -->
    <div class="dashboard">
        <!-- Sidebar -->
        <nav class="sidebar">
            <ul class="sidebar-menu">
                <li><a href="citizen-dashboard.html"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="ai-legal-assistant.html"><i class="fas fa-robot"></i> AI Legal Assistant</a></li>
                <li><a href="case-tracking.html"><i class="fas fa-search"></i> Track Case</a></li>
                <li><a href="find-lawyer.html"><i class="fas fa-user-tie"></i> Find Lawyer</a></li>
                <li><a href="document-locker.html"><i class="fas fa-file-contract"></i> Document Locker</a></li>
                <li><a href="consultation-booking.html"><i class="fas fa-calendar-check"></i> Book Consultation</a></li>
                <li><a href="knowledge-hub.html" class="active"><i class="fas fa-book"></i> Legal Knowledge</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Welcome Section -->
            <section class="welcome-section">
                <h1>Legal Knowledge Hub</h1>
                <p>Access simplified explanations of laws, legal procedures, and your rights.</p>
            </section>

            <!-- Search Section -->
            <section class="search-section">
                <div class="search-box">
                    <input type="text" id="searchInput" class="search-input" placeholder="Search for legal topics, laws, or procedures...">
                    <button class="btn btn-primary" id="searchBtn">Search</button>
                </div>
                
                <div class="category-filters">
                    <button class="category-btn active" data-category="all">All Topics</button>
                    <button class="category-btn" data-category="civil">Civil Law</button>
                    <button class="category-btn" data-category="criminal">Criminal Law</button>
                    <button class="category-btn" data-category="family">Family Law</button>
                    <button class="category-btn" data-category="property">Property Law</button>
                    <button class="category-btn" data-category="consumer">Consumer Rights</button>
                    <button class="category-btn" data-category="labor">Labor Law</button>
                </div>
            </section>

            <!-- Back Button for Article Detail View -->
            <div class="back-btn" id="backToList" style="display: none;">
                <i class="fas fa-arrow-left"></i> Back to Articles
            </div>

            <!-- Article Detail View -->
            <div class="article-detail" id="articleDetail">
                <div class="article-header">
                    <h2 id="articleTitle">Understanding Your Rights as a Tenant</h2>
                    <div class="article-meta-large">
                        <span id="articleCategoryDetail">Civil Law</span>
                        <span id="articleDateDetail">Published: October 15, 2023</span>
                    </div>
                </div>
                
                <div class="article-content" id="articleContent">
                    <!-- Article content will be populated by JavaScript -->
                </div>
            </div>

            <!-- Articles Grid -->
            <div class="knowledge-grid" id="articlesGrid">
                <!-- Articles will be populated by JavaScript -->
                <div class="empty-state">
                    <i class="fas fa-book"></i>
                    <h3>No articles found</h3>
                    <p>Try searching with different keywords or browse by category</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-container">
                <div class="footer-column">
                    <h3>JusticeSetu</h3>
                    <p>Making legal assistance accessible, understandable, and affordable for everyone through technology.</p>
                </div>
                
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="ai-legal-assistant.html">AI Legal Assistant</a></li>
                        <li><a href="find-lawyer.html">Find a Lawyer</a></li>
                        <li><a href="case-tracking.html">Case Tracking</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Support</h3>
                    <ul>
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2023 JusticeSetu. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Initialize Supabase client
        const supabaseUrl = 'https://nbomdnnaigiamjmdvpon.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5ib21kbm5haWdpYW1qbWR2cG9uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4MzY1NTksImV4cCI6MjA3NzQxMjU1OX0.xmsxZDfw23xC2a98hvIuB0uSjDzg6bivfjNK_KActyE';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        // DOM Elements
        const userAvatar = document.getElementById('userAvatar');
        const userName = document.getElementById('userName');
        const logoutBtn = document.getElementById('logoutBtn');
        const articlesGrid = document.getElementById('articlesGrid');
        const articleDetail = document.getElementById('articleDetail');
        const articleTitle = document.getElementById('articleTitle');
        const articleCategoryDetail = document.getElementById('articleCategoryDetail');
        const articleDateDetail = document.getElementById('articleDateDetail');
        const articleContent = document.getElementById('articleContent');
        const backToList = document.getElementById('backToList');
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const categoryBtns = document.querySelectorAll('.category-btn');

        // Current user data and filter state
        let currentUser = null;
        let currentFilter = 'all';
        let currentSearch = '';

        // Sample legal articles (in production, these would come from Supabase)
        const sampleArticles = [
            {
                id: 1,
                title: "Understanding Your Rights as a Tenant",
                excerpt: "Learn about your legal rights and protections as a tenant under Indian rental laws.",
                category: "civil",
                date: "2023-10-15",
                content: `
                    <h3>Tenant Rights in India</h3>
                    <p>As a tenant in India, you have specific rights protected under various laws including the Rent Control Act and Transfer of Property Act. Understanding these rights can help you navigate landlord-tenant relationships effectively.</p>
                    
                    <h3>Key Tenant Rights</h3>
                    <ul>
                        <li><strong>Right to Fair Rent:</strong> Landlords cannot charge excessive rent beyond what is prescribed by local rent control laws.</li>
                        <li><strong>Right to Essential Services:</strong> Your landlord cannot cut off essential services like water and electricity.</li>
                        <li><strong>Right to Privacy:</strong> Landlords must provide reasonable notice before entering your rented premises.</li>
                        <li><strong>Right Against Unfair Eviction:</strong> Landlords cannot evict tenants without proper legal grounds and procedures.</li>
                        <li><strong>Right to Security Deposit Return:</strong> Your security deposit should be returned at the end of your tenancy, minus any legitimate deductions.</li>
                    </ul>
                    
                    <h3>Important Legal Provisions</h3>
                    <p>The Rent Control Act varies by state but generally provides protections against arbitrary rent increases and unfair eviction. Most states require landlords to follow due process and obtain a court order for eviction.</p>
                    
                    <h3>What to Do If Your Rights Are Violated</h3>
                    <p>If you believe your tenant rights have been violated, you can:</p>
                    <ol>
                        <li>Send a formal written notice to your landlord detailing the issue</li>
                        <li>Contact local tenant associations for guidance</li>
                        <li>File a complaint with the rent control authority in your area</li>
                        <li>Consult with a lawyer specializing in property law</li>
                    </ol>
                `
            },
            {
                id: 2,
                title: "Consumer Protection Act: Your Rights Explained",
                excerpt: "A simplified guide to the Consumer Protection Act 2019 and how it protects you.",
                category: "consumer",
                date: "2023-09-22",
                content: `
                    <h3>Introduction to Consumer Protection Act 2019</h3>
                    <p>The Consumer Protection Act 2019 replaced the 1986 version to provide stronger protection for consumers in the digital age. This comprehensive legislation addresses modern consumer issues including e-commerce, product liability, and unfair contracts.</p>
                    
                    <h3>Key Consumer Rights</h3>
                    <ul>
                        <li><strong>Right to Safety:</strong> Protection against hazardous goods and services</li>
                        <li><strong>Right to Information:</strong> Access to complete information about products and services</li>
                        <li><strong>Right to Choose:</strong> Assurance of access to variety of goods at competitive prices</li>
                        <li><strong>Right to be Heard:</strong> Consumer interests receive due consideration</li>
                        <li><strong>Right to Redressal:</strong> Seek resolution against unfair trade practices</li>
                        <li><strong>Right to Consumer Education:</strong> Knowledge about rights and responsibilities</li>
                    </ul>
                    
                    <h3>Filing a Consumer Complaint</h3>
                    <p>You can file a complaint with the appropriate consumer forum if:</p>
                    <ul>
                        <li>You purchased goods with defects</li>
                        <li>Services hired are deficient in any manner</li>
                        <li>You were charged excessive prices</li>
                        <li>Goods/services hazardous to life and safety</li>
                    </ul>
                    
                    <p>The new act establishes Consumer Dispute Redressal Commissions at district, state and national levels to handle complaints based on the value of the claim.</p>
                `
            },
            {
                id: 3,
                title: "Understanding Bail Procedures in India",
                excerpt: "Learn about the different types of bail and the legal procedures involved.",
                category: "criminal",
                date: "2023-10-05",
                content: `
                    <h3>What is Bail?</h3>
                    <p>Bail refers to the temporary release of an accused person awaiting trial, sometimes with conditions and a financial guarantee. The concept is based on the principle that an accused is presumed innocent until proven guilty.</p>
                    
                    <h3>Types of Bail in India</h3>
                    <ul>
                        <li><strong>Regular Bail:</strong> Granted to a person who is already under arrest</li>
                        <li><strong>Anticipatory Bail:</strong> Granted in anticipation of arrest for non-bailable offenses</li>
                        <li><strong>Interim Bail:</strong> Temporary bail granted pending final decision on regular or anticipatory bail</li>
                    </ul>
                    
                    <h3>Bailable vs Non-Bailable Offenses</h3>
                    <p>The Code of Criminal Procedure classifies offenses as bailable and non-bailable:</p>
                    <ul>
                        <li><strong>Bailable Offenses:</strong> Less serious crimes where bail is a matter of right</li>
                        <li><strong>Non-Bailable Offenses:</strong> Serious crimes where bail is at the discretion of the court</li>
                    </ul>
                    
                    <h3>Factors Considered for Granting Bail</h3>
                    <p>Courts consider various factors when deciding on bail applications:</p>
                    <ul>
                        <li>Nature and gravity of the offense</li>
                        <li>Evidence against the accused</li>
                        <li>Possibility of the accused fleeing justice</li>
                        <li>Potential for tampering with evidence or influencing witnesses</li>
                        <li>Criminal history of the accused</li>
                    </ul>
                    
                    <h3>Bail Procedure</h3>
                    <p>The bail process typically involves:</p>
                    <ol>
                        <li>Filing a bail application in the appropriate court</li>
                        <li>Presenting arguments for why bail should be granted</li>
                        <li>Prosecution presenting counter-arguments</li>
                        <li>Court decision with possible conditions</li>
                        <li>Furnishing bail bond if granted</li>
                    </ol>
                `
            },
            {
                id: 4,
                title: "Divorce Laws and Procedures in India",
                excerpt: "Understand the grounds for divorce and the legal process involved.",
                category: "family",
                date: "2023-09-30",
                content: `
                    <h3>Introduction to Divorce Laws in India</h3>
                    <p>Divorce laws in India vary based on religion and personal laws. The main statutes governing divorce include the Hindu Marriage Act, Special Marriage Act, Indian Divorce Act, and Muslim Personal Law.</p>
                    
                    <h3>Grounds for Divorce</h3>
                    <p>Common grounds for divorce across various laws include:</p>
                    <ul>
                        <li>Adultery</li>
                        <li>Cruelty (physical or mental)</li>
                        <li>Desertion for a continuous period</li>
                        <li>Conversion to another religion</li>
                        <li>Mental disorder or incurable disease</li>
                        <li>Presumption of death</li>
                        <li>Mutual consent</li>
                    </ul>
                    
                    <h3>Divorce by Mutual Consent</h3>
                    <p>This is the simplest form of divorce where both spouses agree to end the marriage. Requirements typically include:</p>
                    <ul>
                        <li>Living separately for at least one year</li>
                        <li>Mutual agreement that marriage cannot be continued</li>
                        <li>Joint petition to the court</li>
                    </ul>
                    
                    <h3>Divorce Procedure</h3>
                    <p>The divorce process generally involves:</p>
                    <ol>
                        <li>Filing a divorce petition in the appropriate family court</li>
                        <li>Service of notice to the other spouse</li>
                        <li>Response and counter-claims (if any)</li>
                        <li>Court proceedings and evidence presentation</li>
                        <li>Attempts at reconciliation (mandatory in some cases)</li>
                        <li>Final judgment and decree</li>
                    </ol>
                    
                    <h3>Alimony and Maintenance</h3>
                    <p>The court may order one spouse to provide financial support to the other based on factors like income, standard of living, and duration of marriage.</p>
                `
            },
            {
                id: 5,
                title: "Property Inheritance Laws in India",
                excerpt: "Understand how property is inherited under different personal laws in India.",
                category: "property",
                date: "2023-10-10",
                content: `
                    <h3>Introduction to Inheritance Laws</h3>
                    <p>Property inheritance in India is governed by different personal laws based on religion. The main laws include the Hindu Succession Act, Indian Succession Act, and Muslim Personal Law.</p>
                    
                    <h3>Hindu Succession Act</h3>
                    <p>This Act applies to Hindus, Buddhists, Jains, and Sikhs. Key provisions include:</p>
                    <ul>
                        <li>Equal rights for sons and daughters in ancestral property</li>
                        <li>Classification of heirs into Class I and Class II</li>
                        <li>Rules for intestate succession (when there is no will)</li>
                    </ul>
                    
                    <h3>Muslim Inheritance Law</h3>
                    <p>Muslim inheritance follows specific shares prescribed in Islamic law:</p>
                    <ul>
                        <li>Fixed shares for specific heirs (Quranic heirs)</li>
                        <li>Residual property distribution to agnatic heirs</li>
                        <li>Limits on testamentary disposition (will cannot exceed 1/3 of property)</li>
                    </ul>
                    
                    <h3>Indian Succession Act</h3>
                    <p>This Act primarily applies to Christians and those married under the Special Marriage Act:</p>
                    <ul>
                        <li>Rules for distribution among spouse, children, and other relatives</li>
                        <li>Different rules for male and female intestate succession</li>
                    </ul>
                    
                    <h3>Creating a Will</h3>
                    <p>A will allows you to distribute your property according to your wishes. Important considerations:</p>
                    <ul>
                        <li>Must be made by a person of sound mind</li>
                        <li>Should be properly signed and witnessed</li>
                        <li>Can be registered for additional legal protection</li>
                        <li>Can be revoked or amended during your lifetime</li>
                    </ul>
                    
                    <h3>Probate and Succession Certificate</h3>
                    <p>After a person's death, legal procedures may be required to establish inheritance rights:</p>
                    <ul>
                        <li><strong>Probate:</strong> Court certification of a will's validity (required in some cases)</li>
                        <li><strong>Succession Certificate:</strong> Granted when there is no will, authorizing heirs to inherit debts and securities</li>
                    </ul>
                `
            },
            {
                id: 6,
                title: "Employee Rights Under Indian Labor Laws",
                excerpt: "Know your rights as an employee regarding wages, working conditions, and job security.",
                category: "labor",
                date: "2023-10-08",
                content: `
                    <h3>Overview of Indian Labor Laws</h3>
                    <p>India has a comprehensive framework of labor laws protecting employee rights. Key legislation includes the Industrial Disputes Act, Factories Act, Minimum Wages Act, and the newly enacted Labor Codes.</p>
                    
                    <h3>Fundamental Employee Rights</h3>
                    <ul>
                        <li><strong>Right to Fair Wages:</strong> Entitlement to at least minimum wage and timely payment</li>
                        <li><strong>Right to Safe Working Conditions:</strong> Protection against hazardous work environments</li>
                        <li><strong>Right to Work-Life Balance:</strong> Limits on working hours and entitlement to leaves</li>
                        <li><strong>Right Against Discrimination:</strong> Protection from discrimination based on gender, religion, etc.</li>
                        <li><strong>Right to Form Unions:</strong> Freedom to form trade unions and engage in collective bargaining</li>
                        <li><strong>Right to Social Security:</strong> Access to provident fund, insurance, and other benefits</li>
                    </ul>
                    
                    <h3>Working Hours and Leave Entitlements</h3>
                    <p>Key provisions regarding working conditions:</p>
                    <ul>
                        <li>Maximum 48-hour work week (9 hours per day including breaks)</li>
                        <li>Weekly rest of at least one continuous 24-hour period</li>
                        <li>Annual leave with wages (typically 15 days for every 240 days worked)</li>
                        <li>Maternity leave of 26 weeks for women employees</li>
                        <li>Sick leave and casual leave provisions</li>
                    </ul>
                    
                    <h3>Termination and Retrenchment</h3>
                    <p>Legal protections against arbitrary termination:</p>
                    <ul>
                        <li>Notice period or payment in lieu of notice</li>
                        <li>Retrenchment compensation for eligible employees</li>
                        <li>Protection against unfair dismissal</li>
                        <li>Right to be heard in disciplinary proceedings</li>
                    </ul>
                    
                    <h3>Grievance Redressal</h3>
                    <p>Employees have the right to raise grievances through:</p>
                    <ul>
                        <li>Internal grievance redressal mechanisms</li>
                        <li>Labor courts and industrial tribunals</li>
                        <li>Appellate authorities</li>
                    </ul>
                `
            }
        ];

        // Current user data
        let currentUser = null;

        // Check authentication and load user data
        async function initializeKnowledgeHub() {
            const { data: { session }, error } = await supabase.auth.getSession();
            
            if (!session) {
                // Redirect to login if not authenticated
                window.location.href = 'login.html';
                return;
            }
            
            currentUser = session.user;
            
            // Load user data
            await loadUserData();
            
            // Load articles
            loadArticles();
        }

        // Load user data from database
        async function loadUserData() {
            const { data, error } = await supabase
                .from('users')
                .select('*')
                .eq('id', currentUser.id)
                .single();
            
            if (error) {
                console.error('Error loading user data:', error);
                return;
            }
            
            if (data) {
                // Update UI with user data
                userName.textContent = data.full_name || 'User';
                
                // Set avatar with first letter of name
                if (data.full_name) {
                    userAvatar.textContent = data.full_name.charAt(0).toUpperCase();
                }
            }
        }

        // Load and display articles
        function loadArticles() {
            // For now, we'll use the sample articles
            // In a real app, these would come from the Supabase database
            const articles = getFilteredArticles();
            
            // Update UI with articles
            if (articles.length > 0) {
                articlesGrid.innerHTML = '';
                
                articles.forEach(article => {
                    const articleElement = document.createElement('div');
                    articleElement.className = 'card article-card';
                    
                    articleElement.innerHTML = `
                        <div class="card-title">
                            <i class="fas fa-file-alt"></i>
                            ${article.title}
                        </div>
                        <div class="card-content">
                            <p>${article.excerpt}</p>
                            <div class="article-meta">
                                <span class="article-category">${formatCategory(article.category)}</span>
                                <span>${formatDate(article.date)}</span>
                            </div>
                        </div>
                    `;
                    
                    articleElement.addEventListener('click', () => showArticleDetail(article));
                    articlesGrid.appendChild(articleElement);
                });
            } else {
                // Show empty state
                articlesGrid.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <h3>No articles found</h3>
                        <p>Try searching with different keywords or browse by category</p>
                    </div>
                `;
            }
        }

        // Get filtered articles based on current filter and search
        function getFilteredArticles() {
            let filtered = sampleArticles;
            
            // Apply category filter
            if (currentFilter !== 'all') {
                filtered = filtered.filter(article => article.category === currentFilter);
            }
            
            // Apply search filter
            if (currentSearch) {
                const searchTerm = currentSearch.toLowerCase();
                filtered = filtered.filter(article => 
                    article.title.toLowerCase().includes(searchTerm) || 
                    article.excerpt.toLowerCase().includes(searchTerm) ||
                    article.content.toLowerCase().includes(searchTerm)
                );
            }
            
            return filtered;
        }

        // Show article detail view
        function showArticleDetail(article) {
            // Hide grid and show detail
            articlesGrid.style.display = 'none';
            articleDetail.style.display = 'block';
            backToList.style.display = 'flex';
            
            // Populate article details
            articleTitle.textContent = article.title;
            articleCategoryDetail.textContent = formatCategory(article.category);
            articleDateDetail.textContent = `Published: ${formatDate(article.date)}`;
            articleContent.innerHTML = article.content;
        }

        // Show article list view
        function showArticleList() {
            // Hide detail and show grid
            articleDetail.style.display = 'none';
            backToList.style.display = 'none';
            articlesGrid.style.display = 'grid';
        }

        // Format category for display
        function formatCategory(category) {
            const categoryMap = {
                'civil': 'Civil Law',
                'criminal': 'Criminal Law',
                'family': 'Family Law',
                'property': 'Property Law',
                'consumer': 'Consumer Rights',
                'labor': 'Labor Law'
            };
            
            return categoryMap[category] || category;
        }

        // Format date for display
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('en-US', options);
        }

        // Event Listeners
        logoutBtn.addEventListener('click', async () => {
            const { error } = await supabase.auth.signOut();
            if (!error) {
                window.location.href = 'index.html';
            }
        });

        backToList.addEventListener('click', showArticleList);

        searchBtn.addEventListener('click', () => {
            currentSearch = searchInput.value.trim();
            loadArticles();
        });

        searchInput.addEventListener('keyup', (e) => {
            if (e.key === 'Enter') {
                currentSearch = searchInput.value.trim();
                loadArticles();
            }
        });

        categoryBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // Update active state
                categoryBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                // Update filter and reload articles
                currentFilter = btn.getAttribute('data-category');
                loadArticles();
            });
        });

        // Initialize the knowledge hub when page loads
        document.addEventListener('DOMContentLoaded', initializeKnowledgeHub);
    </script>
</body>
</html>